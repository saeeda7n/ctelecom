---
import TimeInput from "./TimeInput.astro";
import DateInput from "./DateInput.astro";
---

<div class="flex flex-1 flex-col gap-5">
  <div class="flex flex-col gap-1.5">
    <h2
      data-mobile-text="انتخاب زمان"
      data-desktop-text="لطفا بازه زمانی مناسب برای تحویل سفارش را انتخاب کنید"
      class="text-3xl font-semibold after:content-[attr(data-mobile-text)] lg:text-xl lg:after:content-[attr(data-desktop-text)]"
    >
    </h2>
    <span
      class="text-sm font-light text-gray-500 after:content-[attr(data-mobile-text)] lg:text-lg lg:after:content-[attr(data-desktop-text)]"
      data-mobile-text="بازه زمانی ارسال را انتخاب نمایید"
      data-desktop-text="برای انتخاب تاریخ و زمان لطفا کلیک کنید"
    >
    </span>
  </div>

  <div>
    <button
      data-date-time-trigger
      class="flex h-[5.25rem] w-full items-center justify-center gap-5 rounded-full bg-black text-lg font-bold text-white transition-all duration-300 hover:bg-gray-900 lg:h-32 lg:text-2xl"
    >
      <span
        class="ml-3 flex aspect-square h-14 items-center justify-center rounded-full bg-gradient-to-b from-ct-club-primary to-primary text-3xl lg:h-20 lg:text-4xl"
      >
        <i class="fa-duotone fa-calendar-clock ml-1"></i>
      </span>
      <div class="flex flex-col gap-3">
        <div class="flex items-center gap-5">
          <span>انتخاب تاریخ و زمان</span>
          <i class="fa-solid fa-angle-down"></i>
        </div>
        <div class="hidden gap-2 text-sm lg:text-lg" id="selected-date-time">
          <div class="flex gap-2">
            <span data-day-name>سه شنبه</span>
            <span class="text-primary" data-full-date>1402/4/30</span>
          </div>
          ساعت
          <span class="font-bold text-primary" data-time>12-15</span>
        </div>
      </div>
    </button>
  </div>
  <div
    data-date-time-box
    class="ct-dialog fixed bottom-0 left-0 right-0 top-0 z-50 flex items-center justify-center bg-white bg-opacity-50 backdrop-blur-md"
  >
    <div
      class="flex min-h-[12rem] w-96 flex-col overflow-hidden rounded-3xl border border-gray-300 bg-white p-2"
    >
      <TimeInput />
      <DateInput />
      <div class="mt-auto flex items-center justify-between">
        <button
          data-next-btn
          disabled
          class="flex h-12 w-12 items-center justify-center rounded-full bg-primary text-lg text-gray-100 transition-all duration-300 disabled:bg-gray-100 disabled:text-gray-400"
        >
          <i class="fa-solid"></i>
        </button>
        <div class="flex gap-0.5">
          <div class="stepper h-2 w-2 rounded-full bg-black"></div>
          <div class="stepper h-2 w-2 rounded-full bg-black"></div>
        </div>
        <button class="invisible h-12 w-12"></button>
      </div>
    </div>
  </div>
</div>

<style is:global>
  .ct-dialog {
    @apply pointer-events-none invisible;
  }

  .step-1 button[data-next-btn] i:before {
    content: "\f178";
  }

  .step-2 button[data-next-btn] i:before {
    content: "\f00c";
  }

  .ct-dialog.show {
    @apply pointer-events-auto visible;
  }

  .stepper {
    @apply transition-all duration-300;
  }

  .step-1 .stepper:first-child {
    @apply w-6;
  }

  .step-2 .stepper:last-child {
    @apply w-6;
  }

  .step-2 #time-input {
    @apply hidden bg-primary opacity-0;
  }

  .step-1 #date-input {
    @apply hidden bg-primary opacity-0;
  }
</style>
